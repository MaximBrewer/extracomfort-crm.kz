import{u as b,W as p,j as e,r as w,a as k}from"./app-c9604755.js";import{P as C}from"./Pencil-055c228a.js";import{P as v}from"./PrimaryButton-d609209b.js";import{P as _}from"./Plus-ef677dde.js";import{I as d}from"./InputError-d0949e04.js";import{I as x}from"./InputLabel-6660fdcd.js";import{T as j}from"./TextInput-8cf6e601.js";import{I}from"./Info-444661a6.js";import{A as P}from"./AuthenticatedLayout-ed425b4d.js";import{T as D}from"./Trash-16ed6141.js";import"./ApplicationLogo-e5fd4450.js";import"./SecondaryButton-282a7def.js";const f=c=>{const{branch:s=null,localities:n}=c,{setModal:l}=b(),{data:r,setData:o,post:h,patch:m,processing:u,errors:a,reset:g}=p({id:s?s.id:null,sort:s?s.sort:100,title:s?s.title:"",locality_id:s&&s.locality_id?s.locality_id:n.data[0].id}),i=t=>{o(t.target.name,t.target.type==="checkbox"?t.target.checked:t.target.value)},N=t=>{t.preventDefault(),s&&s.id?m(route("admin.branches.update",{branch:s.id}),{onSuccess:()=>{l(null)}}):h(route("admin.branches.store"),{onSuccess:()=>{l(null)}})};return e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl text-center mb-4",children:"Филиал"}),e.jsxs("form",{onSubmit:N,className:"min-w-[24rem]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:r.locality_id,onChange:t=>o("locality_id",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:n.data.map((t,y)=>e.jsx("option",{value:t.id,children:t.title},y))}),e.jsx(d,{message:a.locality_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:"sort",value:"Порядок",color:"text-gray-200",weight:"normal"}),e.jsx(j,{id:"sort",type:"number",name:"sort",bg:"bg-gray-50",value:r.sort,className:"mt-1 block w-full text-xl",onChange:i}),e.jsx(d,{message:a.sort,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(x,{htmlFor:"title",value:"Наименование",color:"text-gray-200",weight:"normal"}),e.jsx(j,{id:"title",type:"text",name:"title",bg:"bg-gray-50",value:r.title,className:"mt-1 block w-full text-xl",onChange:i}),e.jsx(d,{message:a.title,className:"mt-2"})]}),e.jsx(v,{className:"w-full my-4 justify-center text-lg font-semibold",children:"Отправить"}),e.jsx("div",{className:"text-center",children:e.jsx("a",{href:"#",className:"text-red-500 underline hover:no-underline",onClick:t=>{t.preventDefault(),l(null)},children:"Отменить"})})]})]})},z=c=>{const{pagetitle:s,branches:n,errors:l={},localities:r}=c,{setModal:o}=b(),{data:h,post:m}=p({_method:"delete"}),u=a=>{m(route("admin.branches.destroy",{branch:a.id}))};return w.useEffect(()=>{l&&l.message&&o(e.jsx(I,{message:l.message,status:"error"}))},[l]),e.jsxs(P,{auth:c.auth,errors:c.errors,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:s}),children:[e.jsx(k,{title:s}),e.jsxs("div",{className:"pb-12 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex",children:e.jsxs(v,{className:"mb-4",onClick:a=>o(e.jsx(f,{localities:r})),children:[e.jsx("span",{children:"Добавить"}),e.jsx(_,{className:"w-6 h-auto ml-3"})]})}),e.jsx("div",{className:"rounded-lg shadow-block bg-white px-3 pt-5 overflow-y-auto",children:n.map((a,g)=>e.jsxs("div",{className:"flex space-x-5 items-center mb-5 p-5 rounded-lg bg-blue-50 hover:bg-white hover:shadow-block",children:[e.jsx("div",{className:"grow",children:e.jsx("div",{className:"font-medium text-violet-500",children:a.title})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("a",{href:"#",className:"text-violet-500",onClick:i=>{i.preventDefault(),o(e.jsx(f,{branch:a,localities:r}))},children:e.jsx(C,{className:"w-6 h-auto"})}),e.jsx("a",{href:"#",className:"text-red-500",onClick:i=>{i.preventDefault(),u(a)},children:e.jsx(D,{className:"w-6 h-auto"})})]})]},g))})]})]})};export{z as default};
