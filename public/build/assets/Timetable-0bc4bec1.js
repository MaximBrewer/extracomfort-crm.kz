import{r as b,j as e,a as w,d as x,u as p}from"./app-f3b7a02a.js";import{C as g,a as y}from"./ChevronRight-713eae0e.js";import{B as k,a as C}from"./BookStatus-53886a0c.js";import{P as f}from"./Pencil-0178c334.js";import{s as P}from"./statuses-52d2cf53.js";import{t as A}from"./times-a0427bbc.js";import{A as D}from"./ArrowDown-b41500ee.js";import{A as z}from"./AuthenticatedLayout-d07978be.js";import"./InputError-bbce6364.js";import"./InputLabel-b46ed505.js";import"./PrimaryButton-12c92121.js";import"./TextInput-d83f9499.js";import"./ApplicationLogo-bda3f2e1.js";import"./SecondaryButton-4e7d8960.js";const B=l=>{const{auth:n,book:i}=l,{setModal:o}=p(),d=P.data.find(a=>a.code==i.status);return e.jsxs("div",{className:"h-10 flex items-center justify-end",children:[e.jsx("div",{className:`${d.color} mr-4`,children:d.title}),e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),o(e.jsx(k,{book:i,auth:n}))},children:e.jsx(f,{className:"w-4 h-auto"})})]})},S=l=>{const{auth:n,book:i}=l,{setModal:o,priceFormat:d}=p();let a=0;for(let r of i.payments)a=+r.sum;return e.jsxs("div",{className:"h-10 flex items-center justify-end",children:[e.jsx("div",{className:"text-gray-300 mr-4",children:a?d(a):"Оплата"}),e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),o(e.jsx(C,{book:i,auth:n}))},children:e.jsx(f,{className:"w-4 h-auto"})})]})},Q=l=>{const{pagetitle:n,dateText:i,weekdays:o,prevweek:d,nextweek:a,books:r,branch:m,branches:j,auth:h}=l,[v,u]=b.useState(!1);return e.jsxs(z,{auth:l.auth,errors:l.errors,heading:!1,children:[e.jsx(w,{title:n}),e.jsxs("div",{className:"pb-12 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("ul",{className:"flex z-1 relative",children:[e.jsxs("li",{className:"relative",children:[e.jsx("a",{href:"#",className:"block rounded-t-lg py-2.5 px-6 shadow-bb font-medium text-3xl bg-white",onClick:t=>{t.preventDefault()},children:"Записи"}),e.jsx("div",{className:"absolute top-full h-2 left-0 w-full bg-white"})]}),e.jsxs("li",{className:"relative",children:[e.jsx(x,{href:route("recieption.notifications",{branch:m}),className:"block rounded-t-lg py-2.5 px-6 shadow-bb font-medium text-3xl bg-blue-50 text-blue-20",children:"Напоминания"}),e.jsx("div",{className:"absolute top-full h-2 left-0 w-full bg-white"})]})]}),e.jsxs("div",{className:"relative my-1",onClick:t=>t.stopPropagation(),children:[e.jsxs("a",{href:"#",onClick:t=>u(c=>!c),className:"flex itens-center justify-between rounded-lg bg-blue-50 px-4 py-2 min-w-[22.125rem]",children:[e.jsx("span",{children:m.title}),e.jsx(D,{className:"w-3 h-auto text-blue-200"})]}),v?e.jsx("ul",{className:"absolute top-full left-0 w-full rounded-lg bg-blue-50",children:j.data.map((t,c)=>e.jsx("li",{children:e.jsx(x,{href:route("recieption.timetable",{branch:t.id}),className:"block px-4 py-2 hover:text-violet-500",onClick:s=>u(!1),children:t.title})},c))}):""]})]}),e.jsxs("div",{className:"shadow-bb rounded-lg bg-white py-5 px-4 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"text-lg font-medium mb-5 capitalize",children:i}),e.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg -mx-3",children:[e.jsx(x,{href:route("recieption.timetable",{branch:m,date:d}),className:"flex items-center shrink-0 py-4 px-4 hover:scale-110",children:e.jsx(g,{className:"h-4 w-auto"})}),e.jsx("ul",{className:"grow grid grid-cols-7 text-center py-1.5",children:o.map((t,c)=>e.jsx("li",{className:"flex justify-center",children:e.jsxs(x,{href:route("recieption.timetable",{branch:m,date:t.date}),className:`py-3 px-3 rounded-lg ${t.selected?"bg-white shadow-block":"hover:bg-white hover:shadow-block"} cursor-pointer`,children:[e.jsx("div",{className:"text-violet-500",children:t.dateText}),e.jsx("div",{className:"text-[.625rem] uppercase text-gray-600",children:t.weekday})]})},c))}),e.jsx(x,{href:route("recieption.timetable",{branch:m,date:a}),className:"flex items-center shrink-0 py-4 px-4 hover:scale-110",children:e.jsx(y,{className:"h-4 w-auto"})})]}),e.jsx("div",{className:"overflow-y-auto -mr-3 pr-3",children:r.data.length?A.data.map((t,c)=>e.jsx("div",{className:"overflow-hidden",children:r.data.filter(s=>s.start==t.value&&s.start==s.time).length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute -left-4 -right-4 top-1/2 border border-dashed border-blue-200"}),e.jsx("div",{className:"flex",children:e.jsx("div",{className:"bg-white px-2 relative z-1 text-xs uppercase font-medium",children:t.label})})]}),r.data.filter(s=>s.start==t.value&&s.start==s.time).map((s,N)=>e.jsxs("div",{className:"flex space-x-5 items-center mb-5 rounded-lg overflow-hidden py-3 bg-blue-50 hover:bg-white hover:shadow-block",children:[e.jsx("div",{className:"w-[40%] flex space-x-5 items-center pl-5",children:e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"font-medium",children:s.patient.fullName}),e.jsx("div",{className:"",children:s.patient.phone?s.patient.phone:s.patient.email})]})}),e.jsx("div",{className:"text-sm w-[40%]",children:e.jsx("span",{className:"text-violet-500 font-medium",children:s.service?s.service.title:""})}),e.jsx("div",{className:"text-sm w-[20%] flex justify-end -my-3",children:e.jsxs("div",{className:"pr-5",children:[e.jsx(B,{book:s,auth:h}),e.jsx(S,{book:s,auth:h})]})})]},N))]}):""},c)):e.jsx("div",{className:"relative my-4 text-center",children:e.jsx("div",{className:"text-2xl font-semibold py-8",children:"Нет записей"})})})]})]})]})};export{Q as default};
