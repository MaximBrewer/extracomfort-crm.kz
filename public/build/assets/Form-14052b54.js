import{u as I,r as g,W as S,j as e,a as D,d as _}from"./app-26314979.js";import{A}from"./AuthenticatedLayout-1d65ef29.js";import{I as E}from"./input-fa025b09.js";import{S as $}from"./SuccessButton-d2be5082.js";import{C as z}from"./CancelButton-dd5b4b1d.js";import{I as l}from"./InputError-b7c9fcda.js";import{I as o}from"./InputLabel-c55476a0.js";import{T as c}from"./TextInput-2c5236ff.js";import"./ApplicationLogo-71ea1184.js";import"./SecondaryButton-129257c8.js";const J=u=>{const{pagetitle:p,patient:a=null,genders:v,localities:j}=u,b=[{days:31,title:"Января"},{days:28,title:"Февраля"},{days:31,title:"Марта"},{days:30,title:"Апреля"},{days:31,title:"Мая"},{days:30,title:"Июня"},{days:31,title:"Июля"},{days:31,title:"Августа"},{days:30,title:"Сентября"},{days:31,title:"Октября"},{days:30,title:"Ноября"},{days:31,title:"Декабря"}],{zeroPad:y}=I(),[n,f]=g.useState(a&&a.birthdate?new Date(a.birthdate).getMonth():0),[h,w]=g.useState(a&&a.birthdate?new Date(a.birthdate).getFullYear():1980),[x,N]=g.useState(a&&a.birthdate?new Date(a.birthdate).getDate():1),{data:i,setData:m,post:k,patch:C,processing:M,errors:s,reset:V,transform:B}=S({id:a?a.id:null,name:a&&a.name?a.name:"",lastname:a&&a.lastname?a.lastname:"",surname:a&&a.surname?a.surname:"",birthdate:a&&a.birthdate?a.birthdate:"01.01.1980",tin:a&&a.tin?`${a.tin}`:"",email:a&&a.email?a.email:"",phone:a&&a.phone?a.phone:"",addon:a&&a.addon?a.addon:"",gender:a&&a.gender?a.gender:"male",locality_id:a&&a.locality_id?a.locality_id:j.data[0].id});g.useEffect(()=>{m("birthdate",`${y(x,2)}.${y(1+1*n,2)}.${h}`)},[x,h,n]);const d=t=>{m(t.target.name,t.target.type==="checkbox"?t.target.checked:t.target.value)},F=t=>{t.preventDefault(),a&&a.id?C(route("recieption.patients.update",{patient:a.id}),{onSuccess:()=>{}}):k(route("recieption.patients.store"),{onSuccess:()=>{}})};return e.jsxs(A,{auth:u.auth,errors:u.errors,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:p}),children:[e.jsx(D,{title:p}),e.jsx("div",{className:"pb-12 pt-5",children:e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-16",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"name",value:"Имя*",color:"text-gray-200",weight:"normal"}),e.jsx(c,{id:"name",type:"text",placeholder:"Иван",name:"name",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.name,className:"mt-1 block w-full",onChange:d}),e.jsx(l,{message:s.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"lastname",value:"Фамилия*",color:"text-gray-200",weight:"normal"}),e.jsx(c,{id:"lastname",type:"text",rounded:"rounded",placeholder:"Иванов",border:"border border-gray-900 border-opacity-[.12]",name:"lastname",bg:"bg-white",value:i.lastname,className:"mt-1 block w-full",onChange:d}),e.jsx(l,{message:s.lastname,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"surname",value:"Отчество (если имеется)",color:"text-gray-200",weight:"normal"}),e.jsx(c,{id:"surname",type:"text",name:"surname",placeholder:"Иванович",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.surname,className:"mt-1 block w-full",onChange:d}),e.jsx(l,{message:s.surname,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"phone",value:"Phone*",color:"text-gray-200",weight:"normal"}),e.jsx(c,{id:"phone",type:"text",name:"phone",bg:"bg-white",placeholder:"+77777777777",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.phone,className:"mt-1 block w-full",onChange:d}),e.jsx(l,{message:s.phone,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"tin",value:"ИИН",color:"text-gray-200",weight:"normal"}),e.jsx(E,{mask:"0000 0000 0000",value:i.tin,unmask:!0,onAccept:(t,r)=>{d({target:{value:t,name:"tin"}})},className:"rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",type:"text"}),e.jsx(l,{message:s.tin,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"email",value:"E-mail*",color:"text-gray-200",weight:"normal"}),e.jsx(c,{id:"email",type:"email",name:"email",bg:"bg-white",placeholder:"example@mail.com",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:i.email,className:"mt-1 block w-full",onChange:d}),e.jsx(l,{message:s.email,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(o,{htmlFor:"birthdate",value:"Дата рождения*",color:"text-gray-200",weight:"normal"}),e.jsxs("div",{className:"grid grid-cols-11 gap-4",children:[e.jsx("div",{className:"col-span-3",children:e.jsx("select",{onChange:t=>N(t.target.value),defaultValue:x,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(h%4?b[n].days:b[n].days+1).fill(null).map((t,r)=>e.jsx("option",{value:r+1,children:r+1},r+1))})}),e.jsx("div",{className:"col-span-5",children:e.jsx("select",{onChange:t=>f(t.target.value),defaultValue:n,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:b.map((t,r)=>e.jsx("option",{value:r,children:t.title},r))})}),e.jsx("div",{className:"col-span-3",children:e.jsx("select",{onChange:t=>w(t.target.value),defaultValue:h,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(70).fill(null).map((t,r)=>e.jsx("option",{value:r+1950,children:r+1950},r+1950))})})]}),e.jsx(l,{message:s.birthdate,className:"mt-2"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"",children:[e.jsx(o,{htmlFor:"gender",value:"Пол*",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:i.gender,onChange:t=>m("gender",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:v.map((t,r)=>e.jsx("option",{value:t.value,children:t.label},r))}),e.jsx(l,{message:s.gender,className:"mt-2"})]}),e.jsxs("div",{className:"",children:[e.jsx(o,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:i.locality_id,onChange:t=>m("locality_id",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:j.data.map((t,r)=>e.jsx("option",{value:t.id,children:t.title},r))}),e.jsx(l,{message:s.locality_id,className:"mt-2"})]})]})}),e.jsxs("div",{className:"grow mb-4 flex flex-col",children:[e.jsx(o,{htmlFor:"addon",value:"Дополнительная информация",color:"text-gray-200",weight:"normal"}),e.jsx("textarea",{value:i.addon,onChange:t=>m("addon",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full grow"}),e.jsx(l,{message:s.birthdate,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex space-x-8 items-center justify-end",children:[e.jsx(_,{href:route("recieption.patients"),children:e.jsx(z,{className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Отменить"})}),e.jsx($,{type:"submit",className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Сохранить"})]})]})})]})};export{J as default};
