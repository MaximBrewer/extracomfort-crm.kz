import{u as I,r as u,W as S,j as e,a as D,d as _}from"./app-e342ee47.js";import{A}from"./AuthenticatedLayout-d7140058.js";import{I as E}from"./input-31cec109.js";import{S as $}from"./SuccessButton-3275d457.js";import{C as z}from"./CancelButton-d2f8545f.js";import{I as l}from"./InputError-b987480f.js";import{I as i}from"./InputLabel-b8491e09.js";import{T as g}from"./TextInput-87dbba55.js";import"./ApplicationLogo-f984433a.js";import"./SecondaryButton-ba2f47e6.js";const J=h=>{const{pagetitle:p,patient:a=null,genders:f,localities:y}=h,b=[{days:31,title:"Января"},{days:28,title:"Февраля"},{days:31,title:"Марта"},{days:30,title:"Апреля"},{days:31,title:"Мая"},{days:30,title:"Июня"},{days:31,title:"Июля"},{days:31,title:"Августа"},{days:30,title:"Сентября"},{days:31,title:"Октября"},{days:30,title:"Ноября"},{days:31,title:"Декабря"}],{zeroPad:j}=I(),[d,v]=u.useState(a&&a.birthdate?new Date(a.birthdate).getMonth():0),[c,w]=u.useState(a&&a.birthdate?new Date(a.birthdate).getFullYear():1980),[x,N]=u.useState(a&&a.birthdate?new Date(a.birthdate).getDate():1),{data:o,setData:n,post:k,patch:C,processing:M,errors:s,reset:V,transform:B}=S({id:a?a.id:null,name:a&&a.name?a.name:"",lastname:a&&a.lastname?a.lastname:"",surname:a&&a.surname?a.surname:"",birthdate:a&&a.birthdate?a.birthdate:"01.01.1980",tin:a&&a.tin?`${a.tin}`:"",email:a&&a.email?a.email:"",addon:a&&a.addon?a.addon:"",gender:a&&a.gender?a.gender:"male",locality_id:a&&a.locality_id?a.locality_id:y.data[0].id});u.useEffect(()=>{n("birthdate",`${j(x,2)}.${j(1+1*d,2)}.${c}`)},[x,c,d]);const m=t=>{n(t.target.name,t.target.type==="checkbox"?t.target.checked:t.target.value)},F=t=>{t.preventDefault(),a&&a.id?C(route("recieption.patients.update",{patient:a.id}),{onSuccess:()=>{}}):k(route("recieption.patients.store"),{onSuccess:()=>{}})};return e.jsxs(A,{auth:h.auth,errors:h.errors,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:p}),children:[e.jsx(D,{title:p}),e.jsx("div",{className:"pb-12 pt-5",children:e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-16",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"name",value:"Имя*",color:"text-gray-200",weight:"normal"}),e.jsx(g,{id:"name",type:"text",placeholder:"Иван",name:"name",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:o.name,className:"mt-1 block w-full",onChange:m}),e.jsx(l,{message:s.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"lastname",value:"Фамилия*",color:"text-gray-200",weight:"normal"}),e.jsx(g,{id:"lastname",type:"text",rounded:"rounded",placeholder:"Иванов",border:"border border-gray-900 border-opacity-[.12]",name:"lastname",bg:"bg-white",value:o.lastname,className:"mt-1 block w-full",onChange:m}),e.jsx(l,{message:s.lastname,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"surname",value:"Отчество (если имеется)",color:"text-gray-200",weight:"normal"}),e.jsx(g,{id:"surname",type:"text",name:"surname",placeholder:"Иванович",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:o.surname,className:"mt-1 block w-full",onChange:m}),e.jsx(l,{message:s.surname,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"tin",value:"ИИН",color:"text-gray-200",weight:"normal"}),e.jsx(E,{mask:"0000 0000 0000",value:o.tin,unmask:!0,onAccept:(t,r)=>{m({target:{value:t,name:"tin"}})},className:"rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",type:"text"}),e.jsx(l,{message:s.tin,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"email",value:"E-mail*",color:"text-gray-200",weight:"normal"}),e.jsx(g,{id:"email",type:"email",name:"email",bg:"bg-white",placeholder:"example@mail.com",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:o.email,className:"mt-1 block w-full",onChange:m}),e.jsx(l,{message:s.email,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"birthdate",value:"Дата рождения*",color:"text-gray-200",weight:"normal"}),e.jsxs("div",{className:"grid grid-cols-11 gap-4",children:[e.jsx("div",{className:"col-span-3",children:e.jsx("select",{onChange:t=>N(t.target.value),defaultValue:x,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(c%4?b[d].days:b[d].days+1).fill(null).map((t,r)=>e.jsx("option",{value:r+1,children:r+1},r+1))})}),e.jsx("div",{className:"col-span-5",children:e.jsx("select",{onChange:t=>v(t.target.value),defaultValue:d,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:b.map((t,r)=>e.jsx("option",{value:r,children:t.title},r))})}),e.jsx("div",{className:"col-span-3",children:e.jsx("select",{onChange:t=>w(t.target.value),defaultValue:c,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(70).fill(null).map((t,r)=>e.jsx("option",{value:r+1950,children:r+1950},r+1950))})})]}),e.jsx(l,{message:s.birthdate,className:"mt-2"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"",children:[e.jsx(i,{htmlFor:"gender",value:"Пол*",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:o.gender,onChange:t=>n("gender",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:f.map((t,r)=>e.jsx("option",{value:t.value,children:t.label},r))}),e.jsx(l,{message:s.gender,className:"mt-2"})]}),e.jsxs("div",{className:"",children:[e.jsx(i,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:o.locality_id,onChange:t=>n("locality_id",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:y.data.map((t,r)=>e.jsx("option",{value:t.id,children:t.title},r))}),e.jsx(l,{message:s.locality_id,className:"mt-2"})]})]})}),e.jsxs("div",{className:"grow mb-4 flex flex-col",children:[e.jsx(i,{htmlFor:"addon",value:"Дополнительная информация",color:"text-gray-200",weight:"normal"}),e.jsx("textarea",{value:o.addon,onChange:t=>n("addon",t.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full grow"}),e.jsx(l,{message:s.birthdate,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex space-x-8 items-center justify-end",children:[e.jsx(_,{href:route("recieption.patients"),children:e.jsx(z,{className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Отменить"})}),e.jsx($,{type:"submit",className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Сохранить"})]})]})})]})};export{J as default};
