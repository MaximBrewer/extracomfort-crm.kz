import{r as i,W as N,j as e,a as w}from"./app-9dc9b0a6.js";import{C as y,O as k,P as A,A as E,K as S,M as T,a as C,R as D,b as I,T as O}from"./Taping-56c95401.js";import{A as P}from"./AuthenticatedLayout-d7dce382.js";import"./PrimaryButton-8eb8c15b.js";import"./react-select.esm-c984fb04.js";import"./floating-ui.dom-4bc0055b.js";import"./InputError-4d8b495d.js";import"./InputLabel-956d4312.js";import"./TextInput-76e9f325.js";import"./index-e8de31d2.js";import"./Checkbox-aa578604.js";import"./DangerButton-02e4f07e.js";import"./ApplicationLogo-11270516.js";import"./SecondaryButton-1752b86d.js";const d={data:[{title:"Консультация",code:"consult"},{title:"ОДС",code:"ods"},{title:"Карта боли",code:"painmap"},{title:"Доп. исследования",code:"addon"},{title:"Кинезотерапия",code:"kinesio"},{title:"Подиатрия",code:"podiatry"},{title:"План реабилитации",code:"reabilitation"},{title:"Другое",code:"other"}]},X=l=>{const{pagetitle:f,appointment:n}=l,g=i.useRef(null),[t,x]=i.useState(n.data.current?d.data.find(a=>a.code===n.data.current):d.data[0]),u=i.useRef(t.code),{data:s,setData:o,post:v,processing:z,errors:r,reset:K,transform:m}=N({...n.data,ods:n.data.ods??{},painmap:n.data.painmap??{}}),b=i.useRef(s);m(()=>({...b.current,current:u.current}));const h=a=>{a&&a.preventDefault(),v(route("specialist.appointment.update",{book:n.data.book_id}),{preserveScroll:!0,preserveState:!0})};i.useEffect(()=>{let a=!1;t.code==u.current||(a=!1),u.current=t.code,a&&a()},[t]),i.useEffect(()=>{b.current=s},[s]);const j=i.useRef(null);i.useEffect(()=>(j.current=setInterval(()=>h(),1e4),()=>clearInterval(j.current)),[]);const R=()=>{x(a=>{let c=d.data.findIndex(p=>p.code==a.code);return c==length-1?a:d.data[c+1]})};return e.jsxs(P,{auth:l.auth,errors:l.errors,scrollpage:!0,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:f}),children:[e.jsx(w,{title:f}),e.jsxs("div",{className:"flex flex-col mb-12",children:[e.jsx("ul",{className:"flex z-1 relative text-center items-strech leading-none",children:d.data.map((a,c)=>e.jsxs("li",{className:`relative flex ${a.code===t.code?"z-10":""}`,children:[e.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),x(a)},className:`flex items-center rounded-t-lg px-2 py-1 shadow-bb font-medium ${a.code===t.code?"bg-white":"bg-blue-50 text-blue-20"}`,children:a.title}),e.jsx("div",{className:"absolute top-full h-2 left-0 w-full bg-white"})]},c))}),e.jsx("div",{className:"shadow-bb rounded-lg bg-white py-5 px-6",children:e.jsxs("form",{onSubmit:h,ref:g,children:[t.code==="consult"?e.jsx(y,{data:s,setData:o,errors:r}):"",t.code==="ods"?e.jsx(k,{data:s,setData:o,transform:m,errors:r}):"",t.code==="painmap"?e.jsx(A,{data:s,setData:o,errors:r}):"",t.code==="addon"?e.jsx(E,{data:s,setData:o,errors:r,appointment:n}):"",t.code==="kinesio"?e.jsx(S,{data:s,setData:o,transform:m,errors:r,nextTab:R}):"",t.code==="manual"?e.jsx(T,{data:s,setData:o,errors:r}):"",t.code==="other"?e.jsx(C,{data:s,setData:o,errors:r}):"",t.code==="reabilitation"?e.jsx(D,{data:s,setData:o,errors:r}):"",t.code==="podiatry"?e.jsx(I,{data:s,setData:o,errors:r,appointment:n}):"",t.code==="taping"?e.jsx(O,{data:s,setData:o,errors:r}):""]})})]})]})};export{X as default};
