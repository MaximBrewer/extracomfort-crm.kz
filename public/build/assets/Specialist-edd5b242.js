import{r as m,j as e,a as y,d as b,R as _,u as k}from"./app-e342ee47.js";import{A as g}from"./ArrowDown-68748529.js";import{A as $}from"./AuthenticatedLayout-d7140058.js";import{t as h}from"./timestatuses-eb595b6c.js";import{B as z}from"./Book-b09e6d5b.js";import"./ApplicationLogo-f984433a.js";import"./SecondaryButton-ba2f47e6.js";import"./react-select.esm-f0839b52.js";import"./floating-ui.dom-4bc0055b.js";import"./InputError-b987480f.js";import"./InputLabel-b8491e09.js";import"./PrimaryButton-b223e156.js";import"./times-a0427bbc.js";const E=i=>{const{item:t,day:c,books:n,currentWeek:d}=i,{setModal:o}=k();let r=n.data.find(l=>l.date==d.days[c].date&&l.time==t.time),x=!r||r.start===r.time;return e.jsx(e.Fragment,{children:x?e.jsx("div",{onClick:l=>t.days[c]!=="rest"&&!r?o(e.jsx(z,{...i,item:t,day:c})):void 0,className:`overflow-hidden relative ${t.days[c]!=="rest"?"cursor-pointer":""} ${r?`row-span-${Math.ceil(r.duration/5)}`:""} border-l px-px leading-tight py-px flex flex-col items-center justify-center border-violet-500 border-b border-b-dashed border-violet-500 ${r?`${h.find(l=>l.code==="active").color}`:`${h.find(l=>l.code===t.days[c]).color}`}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:r.patient.fio}),e.jsx("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:r.patient.phone?r.patient.phone:r.patient.email})]}):e.jsxs("div",{children:[" ",e.jsx("br",{})," "]})}):""})},N=i=>{const{specialist:t}=i;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 bg-cover rounded bg-center",style:{backgroundImage:'url("/storage/avatar.jpeg")'}}),e.jsxs("div",{children:[t.lastname,t.name?` ${t.name.substr(0,1).toUpperCase()}.`:"",t.surname?` ${t.surname.substr(0,1).toUpperCase()}.`:""]})]})},Y=i=>{const{pagetitle:t,specialist:c,week:n,weeks:d,patient:o,branch:r,specialists:x}=i,l=d.find(s=>s.value==n),[p,u]=m.useState(!1),[w,j]=m.useState(!1),f=()=>{u(!1),j(!1)};return m.useEffect(()=>(p?document.addEventListener("click",f):document.removeEventListener("click",f),()=>{document.removeEventListener("click",f)}),[p]),e.jsxs($,{auth:i.auth,errors:i.errors,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:t}),children:[e.jsx(y,{title:t}),e.jsxs("div",{className:"shadow-block rounded-lg bg-white text-sm overflow-hidden flex flex-col p-1 mb-3",children:[e.jsxs("div",{className:"py-5 px-6 flex space-x-6",children:[e.jsxs("div",{className:"relative capitalize",children:[e.jsxs("a",{href:"#",onClick:s=>{s.preventDefault(),s.stopPropagation(),u(a=>!a)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition py-2.5 px-4 flex items-center justify-between min-w-[285px]",children:[e.jsxs("div",{className:"flex space-x-3 ",children:[e.jsx("span",{children:"Неделя:"}),e.jsx("span",{children:l.label})]}),e.jsx(g,{className:"w-[.875rem] h-auto"})]}),p?e.jsx("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full",children:d.map((s,a)=>e.jsx("li",{className:"text-justify w-full",children:e.jsxs(b,{className:"flex space-x-3 py-2 px-3 hover:bg-slate-100 block w-full text-justify",href:route("nurse.book.specialist",{patient:o.id,branch:r.id,specialist:c.id,week:s.value,year:new Date().getFullYear()}),children:[e.jsx("span",{children:"Неделя:"}),e.jsx("span",{children:s.label})]})},a))}):""]}),e.jsxs("div",{className:"relative capitalize",children:[e.jsxs("a",{href:"#",onClick:s=>{s.preventDefault(),s.stopPropagation(),j(a=>!a)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition pr-4 flex items-center justify-between min-w-[285px]",children:[e.jsx("div",{className:"flex space-x-3 items-center",children:e.jsx(N,{specialist:c})}),e.jsx(g,{className:"w-[.875rem] h-auto"})]}),w?e.jsx("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full overflow-y-auto max-h-[24rem]",children:x.map((s,a)=>e.jsx("li",{className:"",children:e.jsx(b,{className:"flex space-x-3 pr-4 hover:bg-slate-100 block w-full items-center",href:route("nurse.book.specialist",{patient:o.id,branch:r.id,specialist:s.id,week:n,year:new Date().getFullYear()}),children:e.jsx(N,{specialist:s})})},a))}):""]})]}),e.jsxs("div",{className:"overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr] bg-slate-100 text-center sticky top-0 z-10",children:[e.jsx("div",{className:""}),l.days.map((s,a)=>e.jsx("div",{className:`p-5 border-l ${s.today?"bg-violet-500 text-white":""} border-violet-500 capitalize`,children:s.title},a))]}),e.jsxs("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr]",children:[e.jsx("div",{className:"h-8"}),[0,1,2,3,4,5,6].map(s=>e.jsx("div",{className:"h-8 border-l border-violet-500"},s))]}),e.jsx("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr] leading-tight border-violet-500",children:c.schedule.map((s,a)=>e.jsxs(_.Fragment,{children:[e.jsxs("div",{className:"relative flex items-center justify-center border-t border-dashed",children:[e.jsx("div",{className:"absolute px-3 bg-white -translate-y-full",children:s.time}),e.jsxs("div",{children:[" ",e.jsx("br",{})," "]})]}),[0,1,2,3,4,5,6].map(v=>m.createElement(E,{...i,key:v,day:v,item:s,currentWeek:l}))]},a))}),e.jsxs("div",{className:"grid grid-cols-[5.25rem_1fr_1fr_1fr_1fr_1fr_1fr_1fr] leading-tight",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute px-3 bg-white -translate-y-full",children:"19:30"}),e.jsxs("div",{children:[" ",e.jsx("br",{})," "]})]}),[0,1,2,3,4,5,6].map(s=>e.jsx("div",{className:"h-8"},s))]})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-4 text-sm",children:h.map((s,a)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 ${s.color} border border-black mr-3 shrink-0`}),e.jsx("div",{children:s.title})]},a))})]})};export{Y as default};
