import{u as S,r as h,W as v,j as a,y as C}from"./app-c04b1514.js";import{I as m}from"./InputError-2ee99817.js";import{I as b}from"./InputLabel-0e7c0787.js";import{P as N}from"./PrimaryButton-041d05ec.js";import{S as p}from"./react-select.esm-1f13c3b0.js";import"./TextInput-cb34aa44.js";const x={control:(t,{data:l,isDisabled:n,isFocused:s,isSelected:o})=>({...t,minHeight:"2.625rem",borderRadius:".25rem",outline:"none",borderColor:"transparent",boxShadow:"none",backgroundColor:"#F4F4F4"}),indicatorSeparator:(t,{data:l,isDisabled:n,isFocused:s,isSelected:o})=>({...t,backgroundColor:"transparent"})},P=t=>{const{user:l,localities:n,auth:s}=t,{setModal:o}=S(),[r,f]=h.useState(s.user&&s.user.locality?n.data.find(e=>e.id===s.user.locality.id):n.data[0]),{data:i,setData:c,setError:d,get:F,post:D,patch:E,processing:L,errors:u,reset:O,transform:g}=v({user:l.id,branch:null});h.useEffect(()=>{c(e=>({...e,branch:r&&r.branches.length?s.user&&s.user.branch?r.branches.find(j=>j.id===s.user.branch.id):r.branches[0]:null}))},[r,s]),g(e=>({user:e.user.id,branch:e.branch.id}));const y=e=>{e.preventDefault(),i.branch?(o(null),C.visit(route(`${s.user.role.name}.book.branch`,{patient:l.id,branch:i.branch.id}))):d("branch","Выберите филиал")};return a.jsxs("form",{onSubmit:y,className:"min-w-[20rem]",children:[a.jsx("h2",{className:"font-bold text-xl text-center mb-4",children:"Филиал"}),a.jsxs("div",{className:"mb-4",children:[a.jsx(b,{htmlFor:"locality",value:"Город",color:"text-gray-200",weight:"normal"}),a.jsx(p,{styles:x,defaultValue:r,isSearchable:!1,isClearable:!1,name:"locality",options:n.data,placeholder:"",getOptionLabel:e=>e.title,getOptionValue:e=>e.id,onChange:e=>f(e)}),a.jsx(m,{message:u.locality,className:"mt-2"})]}),r?a.jsxs("div",{className:"mb-4",children:[a.jsx(b,{htmlFor:"branch",value:"Филиал",color:"text-gray-200",weight:"normal"}),a.jsx(p,{styles:x,value:i.branch,isSearchable:!1,isClearable:!1,name:"branch",noOptionsMessage:()=>a.jsx(a.Fragment,{children:"Нет филиалов"}),options:r.branches,placeholder:"",getOptionLabel:e=>e.title,getOptionValue:e=>e.id,onChange:e=>{d("branch",null),c("branch",e)}}),a.jsx(m,{message:u.branch,className:"mt-2"})]}):"",a.jsxs("div",{className:"flex flex-col space-y-3 mt-5",children:[a.jsx(N,{type:"submit",className:"justify-center",children:"Выбрать"}),a.jsx("div",{className:"text-center",children:a.jsx("a",{href:"#",className:"text-red-500 underline hover:underline-none",onClick:e=>{e.preventDefault(),o(null)},children:"Отменить"})})]})]})};export{P as C};
