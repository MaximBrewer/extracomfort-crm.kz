import{r as j,j as e,a as w,d as p,R as y,u as k}from"./app-f442335c.js";import{A as D}from"./ArrowDown-f76af9a6.js";import{A as $}from"./AuthenticatedLayout-dc081dc3.js";import{t as b}from"./timestatuses-8a6294e6.js";import{B as z}from"./Book-1a247145.js";import{A as Y,a as A}from"./ArrowRight-f27535f7.js";import"./ApplicationLogo-39273804.js";import"./SecondaryButton-67f9aae0.js";import"./react-select.esm-acf9fad0.js";import"./floating-ui.dom-4bc0055b.js";import"./InputError-960c8471.js";import"./InputLabel-49f188a5.js";import"./PrimaryButton-ebc84cc7.js";import"./times-a0427bbc.js";const C=r=>{const{item:l,date:d,specialist:m}=r,{setModal:x,moment:n}=k();let o=n(d,"DD.MM.YYYY").day()===0?6:n(d,"DD.MM.YYYY").day()-1,t=m.books.find(a=>a.date==d&&a.time==l.time),c=!t||t.start===t.time;const h=a=>{a.preventDefault(),x(e.jsx(z,{...r,item:l,date:d}))};return e.jsx(e.Fragment,{children:c?e.jsx("div",{onClick:h,className:`overflow-hidden relative ${l.days[o]!=="rest"?"cursor-pointer":""} ${t?`row-span-${Math.ceil(t.duration/5)}`:""}  border-l px-px leading-tight py-px flex flex-col items-center justify-center border-violet-500 border-b border-b-dashed border-violet-500 ${t?`${b.find(a=>a.code==="active").color}`:`${b.find(a=>a.code===l.days[o]).color}`}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:t.patient.fio}),e.jsx("div",{className:"text-center w-full whitespace-nowrap text-ellipsis overflow-hidden",children:t.patient.phone?t.patient.phone:t.patient.email})]}):e.jsxs("div",{children:[" ",e.jsx("br",{})," "]})}):""})},f=r=>{const{direction:l}=r;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"h-10 px-4 flex items-center",children:e.jsx("span",{children:l.title})})})},J=r=>{const{pagetitle:l,date:d,prevDate:m,nextDate:x,patient:n,branch:o,specialists:t,direction:c,dateText:h,directions:a}=r,[u,v]=j.useState(!1);return e.jsxs($,{auth:r.auth,errors:r.errors,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:l}),children:[e.jsx(w,{title:l}),e.jsxs("div",{className:"shadow-block rounded-lg bg-white text-sm overflow-hidden flex flex-col p-1 mb-3 min-h-[33.33vh]",children:[e.jsxs("div",{className:"py-5 px-6 flex space-x-6",children:[e.jsxs("div",{className:"flex capitalize rounded-lg bg-blue-50 overflow-hidden transition flex items-center justify-between min-w-[285px]",children:[e.jsx(p,{href:route("nurse.book.direction",{patient:n.id,branch:o.id,direction:c.id,date:m}),className:"py-2.5 px-4 hover:bg-slate-100",children:e.jsx(Y,{className:"w-2 h-auto"})}),e.jsx("span",{children:h}),e.jsx(p,{href:route("nurse.book.direction",{patient:n.id,branch:o.id,direction:c.id,date:x}),className:"py-2.5 px-4 hover:bg-slate-100",children:e.jsx(A,{className:"w-2 h-auto"})})]}),e.jsxs("div",{className:"relative capitalize",children:[e.jsxs("a",{href:"#",onClick:s=>{s.preventDefault(),s.stopPropagation(),v(i=>!i)},className:"rounded-lg bg-blue-50 hover:bg-slate-100 transition pr-4 flex items-center justify-between min-w-[285px]",children:[e.jsx("div",{className:"flex space-x-3 items-center",children:e.jsx(f,{direction:c})}),e.jsx(D,{className:"w-[.875rem] h-auto"})]}),u?e.jsx("ul",{className:"z-20 absolute bg-blue-50 z-10 top-full left-0 rounded-lg py-1 w-full overflow-y-auto max-h-[24rem]",children:a.data.map((s,i)=>e.jsx("li",{className:"",children:e.jsx(p,{className:"flex space-x-3 pr-4 hover:bg-slate-100 block w-full items-center",href:route("nurse.book.direction",{patient:n.id,branch:o.id,direction:s.id,date:d}),children:e.jsx(f,{direction:s})})},`direction-${i}`))}):""]})]}),t.data.length?e.jsx("div",{className:"overflow-auto relative w-full flex",children:e.jsxs("div",{children:[e.jsxs("div",{className:"grid text-center sticky top-0 z-20",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e.jsx("div",{className:"bg-slate-100"}),t.data.map((s,i)=>e.jsx("div",{className:"p-5 border-l bg-slate-100 border-l border-violet-500 capitalize",children:s.fio},`specialist-${i}`))]}),e.jsxs("div",{className:"grid text-center",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e.jsx("div",{className:"h-8 border-b border-violet-500 border-dashed"}),t.data.map((s,i)=>e.jsx("div",{className:"h-8 border-l border-violet-500 border-b border-violet-500 border-b-dashed"},`specialist2-${i}`))]}),e.jsx("div",{className:"grid leading-tight",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:t.data[0].schedule.map((s,i)=>e.jsxs(y.Fragment,{children:[e.jsxs("div",{className:" sticky left-0 z-10 bg-white flex items-center justify-center border-b border-violet-500 border-dashed",children:[e.jsx("div",{className:"absolute px-3 bg-white -translate-y-full",children:s.time}),e.jsxs("div",{children:[" ",e.jsx("br",{})," "]})]}),t.data.map((g,N)=>j.createElement(C,{...r,key:N,specialist:g,item:s}))]},i))}),e.jsxs("div",{className:"grid leading-tight",style:{gridTemplateColumns:`5.25rem repeat(${t.data.length}, minmax(154px, max-content))`},children:[e.jsxs("div",{className:"sticky left-0 z-10 flex items-center justify-center",children:[e.jsx("div",{className:"absolute px-3 bg-white -translate-y-full",children:"19:30"}),e.jsxs("div",{children:[" ",e.jsx("br",{})," "]})]}),t.data.map(s=>e.jsx("div",{className:"h-8"},s.id))]})]})}):""]}),e.jsx("div",{className:"grid grid-cols-5 gap-4 text-sm",children:b.map((s,i)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 ${s.color} border border-black mr-3 shrink-0`}),e.jsx("div",{children:s.title})]},i))})]})};export{J as default};
