import{u as S,r as g,W as I,j as e,d as D,a as A}from"./app-de8fb980.js";import{I as E}from"./input-d49fb636.js";import{C as $}from"./CancelButton-742d85c5.js";import{I as o}from"./InputError-eaff3783.js";import{I as i}from"./InputLabel-85408f7d.js";import{S as z}from"./SuccessButton-0bd6717e.js";import{T as b}from"./TextInput-d94a0993.js";import{m as j}from"./monthes-1737a886.js";import{A as M}from"./AuthenticatedLayout-3e0a4434.js";import"./ApplicationLogo-37b39797.js";import"./SecondaryButton-b82ae6ed.js";const V=d=>{const{supervisor:a=null,genders:y,localities:h}=d,{zeroPad:v}=S(),[u,f]=g.useState(a&&a.birthdate?new Date(a.birthdate).getMonth():0),[x,w]=g.useState(a&&a.birthdate?new Date(a.birthdate).getFullYear():1980),[p,N]=g.useState(a&&a.birthdate?new Date(a.birthdate).getDate():1),{data:t,setData:n,post:k,patch:_,processing:B,errors:l,reset:L,transform:P}=I({id:a?a.id:null,name:a&&a.name?a.name:"",lastname:a&&a.lastname?a.lastname:"",surname:a&&a.surname?a.surname:"",birthdate:a&&a.birthdate?a.birthdate:"01.01.1980",tin:a&&a.tin?`${a.tin}`:"",email:a&&a.email?a.email:"",phone:a&&a.phone?a.phone:"",addon:a&&a.addon?a.addon:"",gender:a&&a.gender?a.gender:"male",locality_id:a&&a.locality_id?a.locality_id:h.data.length?h.data[0].id:"",branch_id:a&&a.branch_id?a.branch_id:""});g.useEffect(()=>{n("birthdate",`${v(p,2)}.${v(1+1*u,2)}.${x}`)},[p,x,u]);const m=r=>{n(r.target.name,r.target.type==="checkbox"?r.target.checked:r.target.value)},C=r=>{r.preventDefault(),a&&a.id?_(route("admin.supervisors.update",{supervisor:a.id}),{onSuccess:()=>{}}):k(route("admin.supervisors.store"),{onSuccess:()=>{}})};return e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-16",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"name",value:"Имя*",color:"text-gray-200",weight:"normal"}),e.jsx(b,{id:"name",type:"text",placeholder:"Иван",name:"name",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:t.name,className:"mt-1 block w-full",onChange:m}),e.jsx(o,{message:l.name,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"lastname",value:"Фамилия*",color:"text-gray-200",weight:"normal"}),e.jsx(b,{id:"lastname",type:"text",rounded:"rounded",placeholder:"Иванов",border:"border border-gray-900 border-opacity-[.12]",name:"lastname",bg:"bg-white",value:t.lastname,className:"mt-1 block w-full",onChange:m}),e.jsx(o,{message:l.lastname,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"surname",value:"Отчество (если имеется)",color:"text-gray-200",weight:"normal"}),e.jsx(b,{id:"surname",type:"text",name:"surname",placeholder:"Иванович",bg:"bg-white",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:t.surname,className:"mt-1 block w-full",onChange:m}),e.jsx(o,{message:l.surname,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"phone",value:"Phone*",color:"text-gray-200",weight:"normal"}),e.jsx(b,{id:"phone",type:"text",name:"phone",bg:"bg-white",placeholder:"+77777777777",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:t.phone,className:"mt-1 block w-full",onChange:m}),e.jsx(o,{message:l.phone,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"tin",value:"ИИН",color:"text-gray-200",weight:"normal"}),e.jsx(E,{mask:"0000 0000 0000",value:t.tin,unmask:!0,onAccept:(r,s)=>{m({target:{value:r,name:"tin"}})},className:"rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",type:"text"}),e.jsx(o,{message:l.tin,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"email",value:"E-mail*",color:"text-gray-200",weight:"normal"}),e.jsx(b,{id:"email",type:"email",name:"email",bg:"bg-white",placeholder:"example@mail.com",border:"border border-gray-900 border-opacity-[.12]",rounded:"rounded",value:t.email,className:"mt-1 block w-full",onChange:m}),e.jsx(o,{message:l.email,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"birthdate",value:"Дата рождения*",color:"text-gray-200",weight:"normal"}),e.jsxs("div",{className:"grid grid-cols-11 gap-4",children:[e.jsx("div",{className:"col-span-3",children:e.jsx("select",{onChange:r=>N(r.target.value),defaultValue:p,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(x%4?j[u].days:j[u].days+1).fill(null).map((r,s)=>e.jsx("option",{value:s+1,children:s+1},s+1))})}),e.jsx("div",{className:"col-span-5",children:e.jsx("select",{onChange:r=>f(r.target.value),defaultValue:u,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:j.map((r,s)=>e.jsx("option",{value:s,children:r.title},s))})}),e.jsx("div",{className:"col-span-3",children:e.jsx("select",{onChange:r=>w(r.target.value),defaultValue:x,className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:new Array(70).fill(null).map((r,s)=>e.jsx("option",{value:s+1950,children:s+1950},s+1950))})})]}),e.jsx(o,{message:l.birthdate,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"gender",value:"Пол*",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:t.gender,onChange:r=>n("gender",r.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:y.map((r,s)=>e.jsx("option",{value:r.value,children:r.label},s))}),e.jsx(o,{message:l.gender,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"locality_id",value:"Населенный пункт",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:t.locality_id,onChange:r=>{let s=h.data.find(c=>c.id==r.target.value);n(c=>({...c,locality_id:r.target.value,branch_id:s&&s.branches.length?s.branches[0].id:""}))},className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:h.data.map((r,s)=>e.jsx("option",{value:r.id,children:r.title},s))}),e.jsx(o,{message:l.locality_id,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(i,{htmlFor:"locality_id",value:"Филиал",color:"text-gray-200",weight:"normal"}),e.jsx("select",{value:t.branch_id,onChange:r=>n("branch_id",r.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full",children:h.data.map((r,s)=>e.jsx(g.Fragment,{children:r.id==t.locality_id?r.branches.map((c,F)=>e.jsx("option",{value:c.id,children:c.title},F)):""},s))}),e.jsx(o,{message:l.branch_id,className:"mt-2"})]})]}),e.jsxs("div",{className:"grow mb-4 flex flex-col",children:[e.jsx(i,{htmlFor:"addon",value:"Дополнительная информация",color:"text-gray-200",weight:"normal"}),e.jsx("textarea",{value:t.addon,onChange:r=>n("addon",r.target.value),className:"w-full rounded bg-white border border-gray-900 border-opacity-[.12] ring-0 mt-1 block w-full grow"}),e.jsx(o,{message:l.birthdate,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"flex space-x-8 items-center justify-end",children:[e.jsx(D,{href:route("admin.supervisors.index"),children:e.jsx($,{className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Отменить"})}),e.jsx(z,{type:"submit",className:"my-4 justify-center text-lg font-semibold",size:"wide",children:"Сохранить"})]})]})},U=d=>{const{pagetitle:a}=d;return e.jsxs(M,{auth:d.auth,errors:d.errors,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:a}),children:[e.jsx(A,{title:a}),e.jsx("div",{className:"pb-12 pt-5",children:e.jsx(V,{...d})})]})};export{U as default};
