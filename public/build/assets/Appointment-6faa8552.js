import{r as n,W as N,j as e,a as w}from"./app-6d4591f4.js";import{C as y,O as k,P as A,A as E,K as S,a as C,R as D,b as I}from"./Reabilitation-e818bf2d.js";import{A as O}from"./AuthenticatedLayout-d9dd212c.js";import"./PrimaryButton-ec7e5671.js";import"./react-select.esm-164d3aec.js";import"./floating-ui.dom-4bc0055b.js";import"./InputError-e204cdef.js";import"./InputLabel-53a9cf23.js";import"./TextInput-8d6667b0.js";import"./index-8fda883e.js";import"./Checkbox-d93387b3.js";import"./DangerButton-2f087bb5.js";import"./Info-b3b244b6.js";import"./ApplicationLogo-9d166147.js";import"./SecondaryButton-4f53400a.js";const d={data:[{title:"Консультация",code:"consult"},{title:"ОДС",code:"ods"},{title:"Карта боли",code:"painmap"},{title:"Доп. исследования",code:"addon"},{title:"Кинезотерапия",code:"kinesio"},{title:"Подиатрия",code:"podiatry"},{title:"План реабилитации",code:"reabilitation"},{title:"Другое",code:"other"}]},V=l=>{const{pagetitle:f,appointment:r}=l,g=n.useRef(null),[a,x]=n.useState(r.data.current?d.data.find(t=>t.code===r.data.current):d.data[0]),u=n.useRef(a.code),{data:o,setData:s,post:v,processing:P,errors:i,reset:z,transform:m}=N({...r.data,ods:r.data.ods??{},painmap:r.data.painmap??{}}),b=n.useRef(o);m(()=>({...b.current,current:u.current}));const h=t=>{t&&t.preventDefault(),v(route("specialist.appointment.update",{book:r.data.book_id}),{preserveScroll:!0,preserveState:!0})};n.useEffect(()=>{let t=!1;a.code==u.current||(t=!1),u.current=a.code,t&&t()},[a]),n.useEffect(()=>{b.current=o},[o]);const j=n.useRef(null);n.useEffect(()=>(j.current=setInterval(()=>h(),1e4),()=>clearInterval(j.current)),[]);const R=()=>{x(t=>{let c=d.data.findIndex(p=>p.code==t.code);return c==length-1?t:d.data[c+1]})};return e.jsxs(O,{auth:l.auth,errors:l.errors,scrollpage:!0,heading:e.jsx("h1",{className:"font-semibold text-3xl text-gray-800 leading-tight",children:f}),children:[e.jsx(w,{title:f}),e.jsxs("div",{className:"flex flex-col mb-12",children:[e.jsx("ul",{className:"flex z-1 relative text-center items-strech leading-none",children:d.data.map((t,c)=>e.jsxs("li",{className:`relative flex ${t.code===a.code?"z-10":""}`,children:[e.jsx("a",{href:"#",onClick:p=>{p.preventDefault(),x(t)},className:`flex items-center rounded-t-lg px-2 py-1 shadow-bb font-medium ${t.code===a.code?"bg-white":"bg-blue-50 text-blue-20"}`,children:t.title}),e.jsx("div",{className:"absolute top-full h-2 left-0 w-full bg-white"})]},c))}),e.jsx("div",{className:"shadow-bb rounded-lg bg-white py-5 px-6",children:e.jsxs("form",{onSubmit:h,ref:g,children:[a.code==="consult"?e.jsx(y,{data:o,setData:s,errors:i}):"",a.code==="ods"?e.jsx(k,{data:o,setData:s,transform:m,errors:i}):"",a.code==="painmap"?e.jsx(A,{data:o,setData:s,errors:i}):"",a.code==="addon"?e.jsx(E,{data:o,setData:s,errors:i,appointment:r}):"",a.code==="kinesio"?e.jsx(S,{data:o,setData:s,transform:m,errors:i,nextTab:R}):"",a.code==="podiatry"?e.jsx(C,{data:o,setData:s,errors:i,appointment:r}):"",a.code==="reabilitation"?e.jsx(D,{data:o,setData:s,errors:i}):"",a.code==="other"?e.jsx(I,{data:o,setData:s,errors:i}):""]})})]})]})};export{V as default};
